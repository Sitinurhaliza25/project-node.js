<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://kit.fontawesome.com/dbed6b6114.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="./style.css">
    <title>Tambah barang</title>
    <!-- <link rel="stylesheet" href="/style.css" /> -->
  </head>
  <body>
    <nav>
        <div class="wrapper">
            <div class="logo"><a href="">Tambah Barang</a></div>
            <div class="menu">
                <ul>
                    <li><a class="tbl-biru" href="/hal-admin/">Kembali</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <section>
      <div class="container-insert">
        <div class="body-insert">
          <form class="insert" name="insert">
            <h1>Tambah barang</h1>
            <hr>
            <input type="text" name="nama_barang" placeholder="Nama barang" required autofocus />
            <input type="text" name="harga" placeholder="Harga barang" required />
            <input type="text" name="kode" placeholder="Kode barang" required />

            <input type="text" name="stok" placeholder="Stok barang" required /> 
            <br>
            <label>
              Foto
            </label>
            <input type="file" name="photo" />
            <button>Simpan</button>
          </form>
          <div class="right">
            <!-- <img src="/public/Asset/logo1.jpg" alt=""> -->
          </div>
        </div>
    
      </div>

    </section>
    <script>
      // document.insert.onsubmit = async (e) => {
      //   e.preventDefault();
      //   const data = new FormData();
      //   data.append("nama_barang", document.insert.nama_barang.value);
      //   data.append("harga", document.insert.harga.value);
      //   data.append("kode", document.insert.kode.value);
      //   data.append("stok", document.insert.stok.value);
      //   data.append("image", document.insert.image.files[0]);

      //   await fetch("/api/barang", {
      //     method: "POST",
      //     headers: {
      //       authorization: `Bearer ${localStorage.getItem("token")}`,
      //     },
      //     body: data,
      //   });
      //   alert("Data Berhasil Ditambahkan.");
      //   location.href="../details";
      // };


      document.insert.onsubmit = async (e) => {
  e.preventDefault();
  const data = new FormData();
  data.append("nama_barang", document.insert.nama_barang.value);
  data.append("harga", document.insert.harga.value);
  data.append("kode", document.insert.kode.value);
  data.append("stok", document.insert.stok.value);
  data.append("image", document.insert.photo.files[0]); // Corrected field name

  await fetch("/api/barang", {
    method: "POST",
    headers: {
      authorization: `Bearer ${localStorage.getItem("token")}`,
    },
    body: data,
  });
  alert("Data Berhasil Ditambahkan.");
  location.href = "../details";
};

    </script>
  </body>

  

</html>
